<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ãƒŸãƒƒã‚·ãƒ§ãƒ³ã«æŒ‘æˆ¦</title>
<style>
/* è»½ã„ã‚¹ã‚¿ã‚¤ãƒ«: ç·¨é›†ã—ã‚„ã™ãã—ã¦ã„ã¾ã™ */
body{margin:0;font-family:"Noto Serif JP", "Cinzel Decorative", serif;background:linear-gradient(180deg,#050514,#000);color:#f7f3ff;padding-bottom:90px}
.container{max-width:920px;margin:0 auto;padding:18px}
.card{background:rgba(255,255,255,0.04);border-radius:12px;padding:16px;backdrop-filter: blur(6px);border:1px solid rgba(255,255,255,0.04)}
input{padding:12px;border-radius:10px;border:none;background:rgba(255,255,255,0.06);color:#fff;min-height:44px}
.btn{padding:12px;border-radius:10px;border:none;background:linear-gradient(90deg,#6f5bd8,#9e7cff);color:#fff;font-weight:700;min-height:44px}
.msg-wrong{color:#ffd6d6;margin-top:10px;display:none}
.hint{position:fixed;right:12px;bottom:12px;background:linear-gradient(180deg,#fde7ff,#e6d7ff);color:#2b0057;padding:10px 12px;border-radius:999px;font-weight:700;z-index:5;text-decoration:none}
</style>
</head>
<body>
<div class="container">
  <div class="card">
    <h2 id="missionTitle">ãƒŸãƒƒã‚·ãƒ§ãƒ³ã«æŒ‘æˆ¦</h2>
    <div id="missionPoint" style="font-weight:800;margin-bottom:8px"></div>
    <input id="passInput" placeholder="åˆè¨€è‘‰ã‚’å…¥åŠ›">
    <div id="wrongMsg" class="msg-wrong">ä½•ã‹ãŒé•ã†ã‚ˆã†ã§ã™ã€‚</div>
    <div style="margin-top:12px;display:flex;gap:8px">
      <button id="checkBtn" class="btn">åˆ¤å®šã™ã‚‹</button>
      <button id="backBtn" class="btn" style="background:linear-gradient(90deg,#444,#666)">ãƒ¡ã‚¤ãƒ³ã¸æˆ»ã‚‹</button>
    </div>
    <div id="solvedNote" style="margin-top:10px;color:#c9ffd7;display:none">ã“ã®ãƒŸãƒƒã‚·ãƒ§ãƒ³ã¯æ—¢ã«æ­£è§£æ¸ˆã¿ã§ã™ã€‚</div>
  </div>
</div>

<a class="hint" href="hint.html" target="_blank" rel="noopener noreferrer">ğŸ”® ãƒ’ãƒ³ãƒˆ</a>

<script>
/* ãƒ‡ãƒ¼ã‚¿ã¯index.htmlã¨åŒã˜é…åˆ—æ§‹æˆã‚’æƒ³å®šã—ã¦ã„ã¾ã™ï¼ˆåŒåé…åˆ—ï¼‰ */
const MISSIONS = [
  { id:0, text:"å…‰ã®é­”æ³•ã‚’å”±ãˆã‚ˆ", answer:"ãƒ«ãƒŸãƒŠã‚¹", point:10 },
  { id:1, text:"é¢¨ã‚’æ“ã‚‹è¨€è‘‰ã‚’æ€ã„å‡ºã›", answer:"ã‚¼ãƒ•ã‚£ãƒ¼ãƒ«", point:8 },
  { id:2, text:"æ°´ã®ç²¾éœŠã«å‘¼ã³ã‹ã‘ã‚ˆ", answer:"ã‚¢ã‚¯ã‚¢ãƒªã‚¹", point:7 },
  { id:3, text:"ç‚ã‚’ç¯ã™å‘ªæ–‡ã‚’è¨€ãˆ", answer:"ã‚¤ã‚°ãƒŠã‚¤ãƒˆ", point:9 },
  { id:4, text:"æ™‚é–“ã‚’æ­¢ã‚ã‚‹è¨€è‘‰", answer:"ã‚¯ãƒ­ãƒã‚¹", point:12 },
  { id:5, text:"é‹å‘½ã®è¼ªã‚’å›ã›", answer:"ãƒ•ã‚©ãƒ¼ãƒãƒ¥ãƒŠ", point:11 },
  { id:6, text:"é—‡ã‚’æ‰•ã†ç¥ˆã‚Šã‚’å”±ãˆã‚ˆ", answer:"ãƒã‚¯ã‚¹", point:10 },
  { id:7, text:"çœŸå®Ÿã®æ‰‰ã‚’é–‹ã‘ã‚‹éµ", answer:"ãƒ´ã‚§ãƒªã‚¿ã‚¹", point:13 },
  { id:8, text:"å¤¢ã®å®ˆè­·è€…ã®åã‚’ç­”ãˆã‚ˆ", answer:"ã‚½ãƒ ãƒ‹ã‚¢", point:8 },
  { id:9, text:"æ˜Ÿã€…ã®æ­Œã‚’çŸ¥ã‚‹è€…", answer:"ã‚¹ãƒ†ãƒ©", point:9 },
  { id:10, text:"å¿ƒã®å£°ã‚’å½¢ã«ã›ã‚ˆ", answer:"ã‚¢ãƒ‹ãƒ", point:10 },
  { id:11, text:"æœ€å¾Œã®è©¦ç·´ã‚’è¶Šãˆã‚ˆ", answer:"ã‚¢ãƒ«ã‚«ãƒŠ", point:15 }
];

const TOTAL_KEY = "total_score";
const SOLVED_PREFIX = "mission_";
function getParam(name){ return new URL(location.href).searchParams.get(name) }
function getTotal(){ const t = parseInt(localStorage.getItem(TOTAL_KEY)); return Number.isNaN(t)?0:t }

const id = Number(getParam("id"));
const mission = (Number.isNaN(id) || !MISSIONS[id]) ? null : MISSIONS[id];

const titleEl = document.getElementById("missionTitle");
const pointEl = document.getElementById("missionPoint");
const input = document.getElementById("passInput");
const wrongMsg = document.getElementById("wrongMsg");
const checkBtn = document.getElementById("checkBtn");
const backBtn = document.getElementById("backBtn");
const solvedNote = document.getElementById("solvedNote");

if(!mission){
  titleEl.textContent = "ç„¡åŠ¹ãªãƒŸãƒƒã‚·ãƒ§ãƒ³";
  pointEl.style.display = "none";
  checkBtn.disabled = true;
} else {
  titleEl.textContent = `ãƒŸãƒƒã‚·ãƒ§ãƒ³ ${mission.id+1}ï¼š ${mission.text}`;
  pointEl.textContent = `${mission.point} ç‚¹`;
  if(localStorage.getItem(SOLVED_PREFIX + mission.id + "_solved")==="true") solvedNote.style.display="block";
}

checkBtn.addEventListener("click", ()=>{
  wrongMsg.style.display = "none";
  if(!mission) return;
  const v = input.value.trim();
  if(v === mission.answer){
    // go to correct page to add score
    location.href = `correct.html?id=${mission.id}`;
  } else {
    wrongMsg.style.display = "block";
  }
});

backBtn.addEventListener("click", ()=> location.href = "index.html");
</script>
</body>
</html>