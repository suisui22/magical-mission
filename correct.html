<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>正解！</title>
<style>
body{margin:0;font-family:"Cinzel Decorative","Noto Serif JP",serif;background:linear-gradient(180deg,#050417,#000);color:#fff;display:flex;align-items:center;justify-content:center;min-height:100vh;padding:18px}
.card{max-width:720px;background:rgba(255,255,255,0.03);border-radius:16px;padding:28px;text-align:center;backdrop-filter:blur(6px);border:1px solid rgba(255,255,255,0.06)}
.title{font-size:2.2rem;margin:0 0 8px 0;color:#fff}
.sub{opacity:0.95}
.btn{padding:12px 16px;border-radius:10px;border:none;cursor:pointer;margin-top:16px;font-weight:800}
.btn-primary{background:linear-gradient(90deg,#6f5bd8,#9e7cff);color:#fff}
.hint{position:fixed;right:12px;bottom:12px;background:linear-gradient(180deg,#fde7ff,#e6d7ff);color:#2b0057;padding:10px 12px;border-radius:999px;font-weight:700}
</style>
</head>
<body>
  <div class="card">
    <h1 class="title">正解</h1>
    <p class="sub" id="sub">合計に加算しました。</p>
    <div id="pointBox" style="font-weight:800;margin-top:10px"></div>
    <div style="display:flex;gap:12px;justify-content:center">
      <button id="toMain" class="btn btn-primary">メインページへ戻る</button>
      <button id="viewScore" class="btn" style="background:#444;color:#fff">合計を確認</button>
    </div>
  </div>

  <a class="hint" href="hint.html" target="_blank" rel="noopener noreferrer">🔮 ヒント</a>

<script>
const MISSIONS = [
  { id:0, text:"光の魔法を唱えよ", answer:"ルミナス", point:10 },
  { id:1, text:"風を操る言葉を思い出せ", answer:"ゼフィール", point:8 },
  { id:2, text:"水の精霊に呼びかけよ", answer:"アクアリス", point:7 },
  { id:3, text:"炎を灯す呪文を言え", answer:"イグナイト", point:9 },
  { id:4, text:"時間を止める言葉", answer:"クロノス", point:12 },
  { id:5, text:"運命の輪を回せ", answer:"フォーチュナ", point:11 },
  { id:6, text:"闇を払う祈りを唱えよ", answer:"ノクス", point:10 },
  { id:7, text:"真実の扉を開ける鍵", answer:"ヴェリタス", point:13 },
  { id:8, text:"夢の守護者の名を答えよ", answer:"ソムニア", point:8 },
  { id:9, text:"星々の歌を知る者", answer:"ステラ", point:9 },
  { id:10, text:"心の声を形にせよ", answer:"アニマ", point:10 },
  { id:11, text:"最後の試練を越えよ", answer:"アルカナ", point:15 }
];
const TOTAL_KEY = "total_score";
const SOLVED_PREFIX = "mission_";

function getParam(name){ return new URL(location.href).searchParams.get(name) }
function getTotal(){ const t=parseInt(localStorage.getItem(TOTAL_KEY)); return Number.isNaN(t)?0:t }
function setTotal(v){ localStorage.setItem(TOTAL_KEY,String(v)) }

const id = Number(getParam("id"));
const m = (Number.isNaN(id) || !MISSIONS[id]) ? null : MISSIONS[id];
const pointBox = document.getElementById("pointBox");
const sub = document.getElementById("sub");

if(!m){
  document.querySelector(".title").textContent = "無効なアクセス";
  sub.textContent = "ミッションが見つかりません。";
  pointBox.textContent = "";
} else {
  pointBox.textContent = `このミッションの得点： ${m.point} 点`;
  // add once
  if(localStorage.getItem(SOLVED_PREFIX + m.id + "_solved") !== "true"){
    const prev = getTotal();
    setTotal(prev + m.point);
    localStorage.setItem(SOLVED_PREFIX + m.id + "_solved","true");
    sub.textContent = "合計に加算しました！";
  } else {
    sub.textContent = "すでに加算済みです。";
  }
}

document.getElementById("toMain").addEventListener("click", ()=> location.href = "index.html");
document.getElementById("viewScore").addEventListener("click", ()=> alert(`合計得点：${getTotal()}点`));
</script>
</body>
</html>