<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>æ­£è§£ï¼</title>
<style>
body{margin:0;font-family:"Cinzel Decorative","Noto Serif JP",serif;background:linear-gradient(180deg,#050417,#000);color:#fff;display:flex;align-items:center;justify-content:center;min-height:100vh;padding:18px}
.card{max-width:720px;background:rgba(255,255,255,0.03);border-radius:16px;padding:28px;text-align:center;backdrop-filter:blur(6px);border:1px solid rgba(255,255,255,0.06)}
.title{font-size:2.2rem;margin:0 0 8px 0;color:#fff}
.sub{opacity:0.95}
.btn{padding:12px 16px;border-radius:10px;border:none;cursor:pointer;margin-top:16px;font-weight:800}
.btn-primary{background:linear-gradient(90deg,#6f5bd8,#9e7cff);color:#fff}
.hint{position:fixed;right:12px;bottom:12px;background:linear-gradient(180deg,#fde7ff,#e6d7ff);color:#2b0057;padding:10px 12px;border-radius:999px;font-weight:700}
</style>
</head>
<body>
  <div class="card">
    <h1 class="title">æ­£è§£</h1>
    <p class="sub" id="sub">åˆè¨ˆã«åŠ ç®—ã—ã¾ã—ãŸã€‚</p>
    <div id="pointBox" style="font-weight:800;margin-top:10px"></div>
    <div style="display:flex;gap:12px;justify-content:center">
      <button id="toMain" class="btn btn-primary">ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã¸æˆ»ã‚‹</button>
      <button id="viewScore" class="btn" style="background:#444;color:#fff">åˆè¨ˆã‚’ç¢ºèª</button>
    </div>
  </div>

  <a class="hint" href="hint.html" target="_blank" rel="noopener noreferrer">ğŸ”® ãƒ’ãƒ³ãƒˆ</a>

<script>
const MISSIONS = [
  { id:0, text:"å…‰ã®é­”æ³•ã‚’å”±ãˆã‚ˆ", answer:"ãƒ«ãƒŸãƒŠã‚¹", point:10 },
  { id:1, text:"é¢¨ã‚’æ“ã‚‹è¨€è‘‰ã‚’æ€ã„å‡ºã›", answer:"ã‚¼ãƒ•ã‚£ãƒ¼ãƒ«", point:8 },
  { id:2, text:"æ°´ã®ç²¾éœŠã«å‘¼ã³ã‹ã‘ã‚ˆ", answer:"ã‚¢ã‚¯ã‚¢ãƒªã‚¹", point:7 },
  { id:3, text:"ç‚ã‚’ç¯ã™å‘ªæ–‡ã‚’è¨€ãˆ", answer:"ã‚¤ã‚°ãƒŠã‚¤ãƒˆ", point:9 },
  { id:4, text:"æ™‚é–“ã‚’æ­¢ã‚ã‚‹è¨€è‘‰", answer:"ã‚¯ãƒ­ãƒã‚¹", point:12 },
  { id:5, text:"é‹å‘½ã®è¼ªã‚’å›ã›", answer:"ãƒ•ã‚©ãƒ¼ãƒãƒ¥ãƒŠ", point:11 },
  { id:6, text:"é—‡ã‚’æ‰•ã†ç¥ˆã‚Šã‚’å”±ãˆã‚ˆ", answer:"ãƒã‚¯ã‚¹", point:10 },
  { id:7, text:"çœŸå®Ÿã®æ‰‰ã‚’é–‹ã‘ã‚‹éµ", answer:"ãƒ´ã‚§ãƒªã‚¿ã‚¹", point:13 },
  { id:8, text:"å¤¢ã®å®ˆè­·è€…ã®åã‚’ç­”ãˆã‚ˆ", answer:"ã‚½ãƒ ãƒ‹ã‚¢", point:8 },
  { id:9, text:"æ˜Ÿã€…ã®æ­Œã‚’çŸ¥ã‚‹è€…", answer:"ã‚¹ãƒ†ãƒ©", point:9 },
  { id:10, text:"å¿ƒã®å£°ã‚’å½¢ã«ã›ã‚ˆ", answer:"ã‚¢ãƒ‹ãƒ", point:10 },
  { id:11, text:"æœ€å¾Œã®è©¦ç·´ã‚’è¶Šãˆã‚ˆ", answer:"ã‚¢ãƒ«ã‚«ãƒŠ", point:15 }
];
const TOTAL_KEY = "total_score";
const SOLVED_PREFIX = "mission_";

function getParam(name){ return new URL(location.href).searchParams.get(name) }
function getTotal(){ const t=parseInt(localStorage.getItem(TOTAL_KEY)); return Number.isNaN(t)?0:t }
function setTotal(v){ localStorage.setItem(TOTAL_KEY,String(v)) }

const id = Number(getParam("id"));
const m = (Number.isNaN(id) || !MISSIONS[id]) ? null : MISSIONS[id];
const pointBox = document.getElementById("pointBox");
const sub = document.getElementById("sub");

if(!m){
  document.querySelector(".title").textContent = "ç„¡åŠ¹ãªã‚¢ã‚¯ã‚»ã‚¹";
  sub.textContent = "ãƒŸãƒƒã‚·ãƒ§ãƒ³ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚";
  pointBox.textContent = "";
} else {
  pointBox.textContent = `ã“ã®ãƒŸãƒƒã‚·ãƒ§ãƒ³ã®å¾—ç‚¹ï¼š ${m.point} ç‚¹`;
  // add once
  if(localStorage.getItem(SOLVED_PREFIX + m.id + "_solved") !== "true"){
    const prev = getTotal();
    setTotal(prev + m.point);
    localStorage.setItem(SOLVED_PREFIX + m.id + "_solved","true");
    sub.textContent = "åˆè¨ˆã«åŠ ç®—ã—ã¾ã—ãŸï¼";
  } else {
    sub.textContent = "ã™ã§ã«åŠ ç®—æ¸ˆã¿ã§ã™ã€‚";
  }
}

document.getElementById("toMain").addEventListener("click", ()=> location.href = "index.html");
document.getElementById("viewScore").addEventListener("click", ()=> alert(`åˆè¨ˆå¾—ç‚¹ï¼š${getTotal()}ç‚¹`));
</script>
</body>
</html>